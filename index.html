<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distrito Imports | CatÃ¡logo Profissional</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root{ --red:#E60000; --black:#0a0a0a; --gray:#f2f2f2; --whats:#25D366; --yellow:#FFD700; }
        body{margin:0;font-family:Montserrat;background:var(--gray);padding-bottom:100px;color:var(--black);}
        header{background:var(--black);color:#fff;text-align:center;padding:20px;border-bottom:4px solid var(--red);cursor:pointer;}
        header span{color:var(--red)}
        nav{background:#fff;display:flex;justify-content:center;position:sticky;top:0;z-index:1000;box-shadow:0 2px 5px rgba(0,0,0,0.1);overflow-x:auto;}
        .nav-link{padding:15px 20px;border:none;background:none;font-weight:700;font-size:12px;text-transform:uppercase;cursor:pointer;white-space:nowrap;color:#666;}
        .nav-link.active{color:var(--red);border-bottom:3px solid var(--red)}
        .container{max-width:1200px;margin:15px auto;padding:0 10px}
        .grid{display:grid;grid-template-columns:repeat(2, 1fr);gap:10px;}
        @media(min-width:768px){.grid{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));}}
        .card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 10px rgba(0,0,0,0.1);display:flex;flex-direction:column;position:relative;}
        .img-box{width:100%;padding-top:130%;position:relative;background:#eee;}
        .img-box img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;}
        .info{padding:10px;text-align:center;flex-grow:1;display:flex;flex-direction:column;}
        .info h3{font-size:11px;margin:5px 0;height:28px;overflow:hidden;text-transform:uppercase;}
        .price{color:var(--red);font-weight:900;font-size:17px;margin-bottom:10px;}
        .sizes{display:flex;justify-content:center;gap:4px;margin-bottom:10px;flex-wrap:wrap;}
        .size{border:1px solid #ddd;padding:5px 8px;font-size:10px;border-radius:4px;cursor:pointer;font-weight:bold;}
        .size.active{background:var(--red);color:#fff;border-color:var(--red);}
        .btn-buy{background:var(--whats);color:#fff;border:none;width:100%;padding:12px;border-radius:6px;font-weight:900;font-size:11px;cursor:pointer;opacity:0.4;pointer-events:none;text-transform:uppercase;}
        #cart-bar{position:fixed;bottom:0;width:100%;background:var(--black);color:#fff;padding:15px;display:none;justify-content:space-around;align-items:center;z-index:2000;border-top:3px solid var(--red);}
        #adminPanel{display:none;position:fixed;inset:0;background:#000;z-index:5000;padding:20px;overflow:auto;color:#fff;}
        .admin-item{background:#1a1a1a;padding:15px;margin-bottom:15px;border-radius:8px;border-left:4px solid var(--red);}
        .admin-item input{width:100%;padding:10px;margin:5px 0;box-sizing:border-box;background:#333;color:#fff;border:1px solid #444;border-radius:5px;}
        .btn-panel{width:100%;padding:15px;border:none;border-radius:8px;font-weight:900;cursor:pointer;margin-bottom:10px;text-transform:uppercase;}
    </style>
</head>
<body>

<header id="logo"><h1>DISTRITO <span>IMPORTS</span></h1></header>

<nav id="menu">
    <button class="nav-link active" onclick="changeCat('camisas',this)">Camisas</button>
    <button class="nav-link" onclick="changeCat('bermudas',this)">Bermudas</button>
    <button class="nav-link" onclick="changeCat('conjuntos',this)">Conjuntos</button>
    <button class="nav-link" onclick="changeCat('tenis',this)">TÃªnis</button>
</nav>

<div class="container">
    <div id="product-grid" class="grid"></div>
</div>

<div id="cart-bar">
    <span id="cart-count">0 ITENS</span>
    <button onclick="sendZap()" style="background:var(--whats);color:#fff;border:none;padding:10px 20px;border-radius:5px;font-weight:900;cursor:pointer;">ENVIAR PEDIDO</button>
</div>

<div id="adminPanel">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
        <h2>PAINEL DISTRITO</h2>
        <button onclick="closeAdmin()" style="padding:10px;background:var(--red);color:#fff;border:none;border-radius:5px;font-weight:bold;">FECHAR</button>
    </div>
    <div id="admin-list"></div>
    <button class="btn-panel" style="background:var(--whats);color:#fff;" onclick="addNovo()">+ Adicionar Novo Produto</button>
    <button class="btn-panel" style="background:var(--yellow);color:#000;" onclick="generateBackup()">ðŸ’¾ Gerar CÃ³digo de Backup</button>
    <button class="btn-panel" style="background:#444;color:#fff;" onclick="toggleLock()">ðŸ”’ Trancar/Destravar Categoria</button>
</div>

<script>
    const whatsapp = "5522999400239";
    const senha = "2123";
    let catAtual = 'camisas';
    let carrinho = [];

    // Estrutura inicial caso a memÃ³ria seja limpa
    const base = {
        camisas: [], bermudas: [], conjuntos: [], tenis: []
    };

    let dados = JSON.parse(localStorage.getItem('DISTRITO_MASTER_V12')) || base;
    let travas = JSON.parse(localStorage.getItem('DISTRITO_LOCKS')) || { camisas: false, bermudas: false, conjuntos: false, tenis: false };

    function render(){
        const grid = document.getElementById('product-grid');
        grid.innerHTML = '';
        
        if(travas[catAtual]){
            grid.innerHTML = `<div style="grid-column:1/-1;text-align:center;padding:50px;"><h2>ðŸ”’ EM BREVE</h2><p>Novidades chegando!</p></div>`;
            return;
        }

        if(dados[catAtual].length === 0){
            grid.innerHTML = `<p style="grid-column:1/-1;text-align:center;">Nenhum produto em ${catAtual.toUpperCase()}.</p>`;
        }

        dados[catAtual].forEach((p, i) => {
            grid.innerHTML += `
                <div class="card">
                    <div class="img-box"><img src="${p.img || 'https://via.placeholder.com/400x520?text=Sem+Foto'}"></div>
                    <div class="info">
                        <h3>${p.nome}</h3>
                        <div class="price">R$ ${p.preco}</div>
                        <div class="sizes" id="s-${i}"></div>
                        <button class="btn-buy" id="b-${i}">Escolha o Tamanho</button>
                    </div>
                </div>`;
            
            const sDiv = document.getElementById(`s-${i}`);
            Object.keys(p.estoque).forEach(tam => {
                sDiv.innerHTML += `<div class="size" onclick="escolherTamanho(this, ${i}, '${tam}')">${tam}</div>`;
            });
        });
    }

    function escolherTamanho(el, idx, tam){
        el.parentElement.querySelectorAll('.size').forEach(s => s.classList.remove('active'));
        el.classList.add('active');
        const btn = document.getElementById(`b-${idx}`);
        btn.style.opacity = "1";
        btn.style.pointerEvents = "auto";
        btn.innerText = "ADICIONAR AO PEDIDO";
        btn.onclick = () => {
            carrinho.push({nome: dados[catAtual][idx].nome, tam: tam, preco: dados[catAtual][idx].preco});
            document.getElementById('cart-bar').style.display = 'flex';
            document.getElementById('cart-count').innerText = carrinho.length + " ITENS";
            btn.innerText = "âœ… ADICIONADO";
        };
    }

    function sendZap(){
        let m = "*NOVO PEDIDO - DISTRITO IMPORTS*\n\n";
        carrinho.forEach(c => m += `â€¢ ${c.nome} | Tam: ${c.tam}\n`);
        window.location.href = `https://wa.me/${whatsapp}?text=${encodeURIComponent(m)}`;
    }

    function changeCat(c, btn){
        catAtual = c;
        document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
        btn.classList.add('active');
        render();
    }

    // Admin
    let clicks = 0;
    document.getElementById('logo').onclick = () => {
        clicks++;
        if(clicks >= 5){ let p = prompt("Senha:"); if(p === senha) openAdmin(); clicks = 0; }
        setTimeout(() => clicks = 0, 2000);
    };

    function openAdmin(){
        document.getElementById('adminPanel').style.display = 'block';
        const list = document.getElementById('admin-list');
        list.innerHTML = `<h3 style="color:var(--yellow)">Editando: ${catAtual.toUpperCase()}</h3>`;
        dados[catAtual].forEach((p, i) => {
            list.innerHTML += `
                <div class="admin-item">
                    <input type="text" value="${p.nome}" placeholder="Nome" onchange="dados['${catAtual}'][${i}].nome=this.value;save()">
                    <input type="text" value="${p.preco}" placeholder="PreÃ§o" onchange="dados['${catAtual}'][${i}].preco=this.value;save()">
                    <input type="text" value="${p.img}" placeholder="Link Direto da Foto (.jpg)" onchange="dados['${catAtual}'][${i}].img=this.value;save()">
                    <button onclick="dados['${catAtual}'].splice(${i},1);save();openAdmin()" style="background:none;color:red;border:none;cursor:pointer;font-weight:bold;">[X] EXCLUIR</button>
                </div>`;
        });
    }

    function addNovo(){
        let grade = (catAtual === 'tenis' || catAtual === 'bermudas') ? {38:1,40:1,42:1,44:1} : {P:1,M:1,G:1,GG:1};
        dados[catAtual].unshift({nome: "Novo Produto", preco: "0,00", img: "", estoque: grade});
        save(); openAdmin();
    }

    function toggleLock(){
        travas[catAtual] = !travas[catAtual];
        localStorage.setItem('DISTRITO_LOCKS', JSON.stringify(travas));
        alert(catAtual.toUpperCase() + (travas[catAtual] ? " TRANCADA" : " LIBERADA"));
    }

    function generateBackup(){
        let b = JSON.stringify(dados);
        prompt("COPIE ESTE CÃ“DIGO E SALVE:", b);
    }

    function save(){ localStorage.setItem('DISTRITO_MASTER_V12', JSON.stringify(dados)); }
    function closeAdmin(){ document.getElementById('adminPanel').style.display='none'; render(); }

    render();
</script>
</body>
</html>

