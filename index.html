<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Catálogo com Estoque Automático</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{margin:0;font-family:Arial;background:#f2f2f2}
header{background:#111;color:#fff;padding:15px;text-align:center}
nav button{margin:5px;padding:10px;border:none;border-radius:5px;cursor:pointer}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:15px;padding:15px}
.card{background:#fff;border-radius:10px;padding:10px}
.card img{width:100%;border-radius:10px}
.dots{display:flex;gap:8px;margin:8px 0}
.dot{width:20px;height:20px;border-radius:50%;cursor:pointer;border:2px solid #ccc}
.dot.active{border-color:#000}
.sizes{display:flex;gap:8px;flex-wrap:wrap}
.size{padding:5px 10px;border:1px solid #000;border-radius:5px;cursor:pointer}
.size.disabled{opacity:.4;pointer-events:none}
.buy{margin-top:10px;padding:10px;width:100%;border:none;border-radius:5px;background:#25D366;color:#fff;font-weight:bold;cursor:pointer}
.buy[disabled]{opacity:.4;cursor:not-allowed}

/* ADMIN */
#admin{background:#fff;padding:15px}
input{width:50px}
</style>
</head>

<body>

<header>
<h2>CATÁLOGO</h2>
<nav>
<button onclick="showCat('camisas')">Camisas</button>
<button onclick="showCat('bermudas')">Bermudas</button>
<button onclick="showCat('conjuntos')">Conjuntos</button>
<button onclick="toggleAdmin()">ADMIN</button>
</nav>
</header>

<div id="catalogo"></div>

<div id="admin" style="display:none"></div>

<script>
const whatsapp="5522999400239";

let produtos={
camisas:[
{
nome:"Camisa Premium",
preco:79.90,
cores:{
preto:{img:"https://via.placeholder.com/300/000",estoque:{P:5,M:5,G:3}},
vermelho:{img:"https://via.placeholder.com/300/f00",estoque:{P:2,M:0,G:1}}
}
}
],
bermudas:[
{
nome:"Bermuda Dry",
preco:89.90,
cores:{
preto:{img:"https://via.placeholder.com/300/111",estoque:{38:3,40:2,42:1}},
azul:{img:"https://via.placeholder.com/300/00f",estoque:{38:1,40:0,42:2}}
}
}
],
conjuntos:[
{
nome:"Conjunto Esportivo",
preco:149.90,
cores:{
cinza:{img:"https://via.placeholder.com/300/999",estoque:{P:2,M:2,G:2}},
preto:{img:"https://via.placeholder.com/300/000",estoque:{P:0,M:1,G:1}}
}
}
]
};

let categoriaAtual="camisas";

function showCat(cat){
categoriaAtual=cat;
render();
}

function render(){
const div=document.getElementById("catalogo");
div.innerHTML=`<div class="grid" id="grid"></div>`;
const grid=document.getElementById("grid");

produtos[categoriaAtual].forEach((p,i)=>{
const corInicial=Object.keys(p.cores)[0];
grid.innerHTML+=`
<div class="card">
<img src="${p.cores[corInicial].img}">
<h3>${p.nome}</h3>
<p>R$ ${p.preco.toFixed(2)}</p>

<div class="dots">
${Object.keys(p.cores).map(c=>`
<div class="dot" style="background:${c}" onclick="selectCor(${i},'${c}')"></div>`).join("")}
</div>

<div class="sizes" id="sizes-${i}"></div>

<button class="buy" id="buy-${i}" disabled>Escolha tamanho</button>
</div>
`;
selectCor(i,corInicial);
});
}

let selecao={};

function selectCor(i,cor){
selecao[i]={cor:null,tam:null};
const card=document.querySelectorAll(".card")[i];
card.querySelector("img").src=produtos[categoriaAtual][i].cores[cor].img;
selecao[i].cor=cor;

const sizes=document.getElementById(`sizes-${i}`);
sizes.innerHTML="";
Object.entries(produtos[categoriaAtual][i].cores[cor].estoque).forEach(([t,q])=>{
sizes.innerHTML+=`
<div class="size ${q==0?'disabled':''}" onclick="selectSize(${i},'${t}')">${t}</div>`;
});

document.getElementById(`buy-${i}`).disabled=true;
}

function selectSize(i,t){
selecao[i].tam=t;
const btn=document.getElementById(`buy-${i}`);
btn.disabled=false;
btn.onclick=()=>{
let prod=produtos[categoriaAtual][i];
let cor=selecao[i].cor;
if(prod.cores[cor].estoque[t]>0){
prod.cores[cor].estoque[t]--;
render();
window.open(`https://wa.me/${whatsapp}?text=`+
encodeURIComponent(`Quero ${prod.nome} cor ${cor} tamanho ${t}`));
}else alert("Estoque esgotado");
};
}

function toggleAdmin(){
const adm=document.getElementById("admin");
adm.style.display=adm.style.display=="none"?"block":"none";
renderAdmin();
}

function renderAdmin(){
const adm=document.getElementById("admin");
adm.innerHTML="<h3>Painel de Estoque</h3>";
Object.entries(produtos).forEach(([cat,lista])=>{
adm.innerHTML+=`<h4>${cat}</h4>`;
lista.forEach((p,i)=>{
Object.entries(p.cores).forEach(([c,info])=>{
Object.entries(info.estoque).forEach(([t,q])=>{
adm.innerHTML+=`
<p>${p.nome} | ${c} | ${t}:
<input type="number" value="${q}"
onchange="produtos['${cat}'][${i}].cores['${c}'].estoque['${t}']=parseInt(this.value)">
</p>`;
});
});
});
});
}

render();
</script>

</body>
</html>
